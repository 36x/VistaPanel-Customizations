/*!
* Project: Theme Switcher
* Version: 2.0.0
* Description: Allows you to add an option in your MyOwnFreeHost vPanel to allow users to switch to any theme that they want
* Author: Wybe Network (https://wybenetwork.com/)
* Created at: October 14th, 2022
* Created by: AADev
* Thanks to PlanetCloud for Code Optimization tips
* Docs: https://docs.wybenetwork.com/
*
* DO NOT REMOVE CREDITS
* */ class ThemeSwitcher{#a;#b;#c;#d;curTheme="";constructor(e,t){this.#c=e,this.#d=t.default?`${t.default.dir}___${t.default.type}`:null,this.#a=t.position??"bottom",this.#b=t.baseURL??"https://vpt.cdn.wybenetwork.com/";let i=localStorage.getItem("wnCurTheme");this.curTheme=i??"Default",(i||t.default)&&this.setActiveStyle(t.default&&!i?this.#d:this.curTheme),document.addEventListener("readystatechange",e=>{"complete"===e.target.readyState&&this.insertElement()})}#e(){let e='<form><select id="wn-theme-switcher" onchange="wnThemeSwitcher.setActiveStyle(value);" name="ext">';e+=`<option value="${this.#d??"default___normal"}" ${this.#d===this.curTheme||"Default"===this.curTheme?"selected":""}>Default</option>`,this.#c.forEach(t=>{e+=`<option value="${t.dir}___${t.type}" ${t.dir+"___"+t.type===this.curTheme?"selected":""}>${t.title}</option>`}),e+="</select></form>",document.getElementById("content").insertAdjacentHTML("beforeend",e)}#f(){let t=document.createElement("style");t.innerHTML=`
        #wnThemeSwitcher #lnkUserPrefChangePwd:before {
            content: "\\f1fc"!important;
        }
        `,document.head.appendChild(t);let i=document.getElementById("lnkUserPrefChangeLang").parentElement,n=document.createElement("li");n.setAttribute("id","wnThemeSwitcher");let s=document.createElement("a");s.setAttribute("id","lnkUserPrefChangePwd"),s.setAttribute("href","#"),s.setAttribute("onclick","wnThemeSwitcher.themeOptions();"),s.innerHTML="Change Theme",n.appendChild(s),i.parentNode.insertBefore(n,i.nextSibling)}themeOptions(){let e=document.getElementById("lnkUserPrefChangeLang").parentElement.parentElement,t=document.createElement("ul");t.setAttribute("id","wnThemeSwitcherOptions"),t.setAttribute("class","dropdown-menu dropdown-menu-right"),t.setAttribute("style","display: block;");let i="";i+=`<li><a href="#" onclick="wnThemeSwitcher.setActiveStyle('${this.#d??"default___normal"}');">Default</a></li>`,this.#c.forEach(e=>{i+=`<li><a href="#" onclick="wnThemeSwitcher.setActiveStyle('${e.dir}___${e.type}');">${e.title}</a></li>`}),t.innerHTML=i,e.parentNode.insertBefore(t,e.nextSibling)}insertElement(){"bottom"===this.#a?this.#e():"usernav"===this.#a&&this.#f()}setActiveStyle(e){if("default___normal"===e){localStorage.removeItem("wnCurTheme");return}let t=e.split("___"),i=t[0],n=t[1],s=localStorage.getItem("wnCurTheme");if(s)try{document.getElementById(s).remove(),document.getElementById(s+"___icon").remove()}catch(r){console.log(r)}let l=`<link id="${e}" rel="stylesheet" type="text/css" href="${this.#b+i}/${"special"===n?"panel.css":"styles.css"}" />${"normal"===n?`<link id="${e}___icon" rel="stylesheet" type="text/css" href="${this.#b+i}/icon_spritemap.css" />`:""}`;if(document.head.insertAdjacentHTML("beforeend",l),localStorage.setItem("wnCurTheme",e),"usernav"===this.#a)try{document.getElementById("wnThemeSwitcherOptions").remove()}catch(h){console.log(h)}}}