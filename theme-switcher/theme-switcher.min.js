/*!
* Project: Theme Switcher
* Version: 2.0.0
* Description: Allows you to add an option in your MyOwnFreeHost vPanel to allow users to switch to any theme that they want
* Author: Wybe Network (https://wybenetwork.com/)
* Created at: October 14th, 2022
* Created by: AADev
* Thanks to PlanetCloud for Code Optimization tips
* Docs: https://docs.wybenetwork.com/
*
* DO NOT REMOVE CREDITS
* */ class ThemeSwitcher{#a;#b;#c;curTheme="";constructor(e,t){this.#c=e,this.#a=t.position||"bottom",this.#b=t.baseURL||"https://vpt.cdn.wybenetwork.com/";let i=document.cookie.match(RegExp("(^| )wnCurTheme=([^;]+)"));this.curTheme=i?i[2]:"Default",(i||t.default)&&this.setActiveStyle(t.default?`${t.default.dir}___${t.default.type}`:this.curTheme),document.addEventListener("readystatechange",e=>{"complete"===e.target.readyState&&this.insertElement()})}#d(){let e='<form><select id="wn-theme-switcher" onchange="wnThemeSwitcher.curTheme = value; wnThemeSwitcher.setActiveStyle(value);" name="ext">';e+="Default"===this.curTheme?'<option value="Default___normal" disabled selected>Default</option>':"",this.#c.forEach(t=>{e+=`<option value="${t.dir}___${t.type}" ${t.dir+"___"+t.type===this.curTheme?"selected":""}>${t.title}</option>`}),e+="</select></form>",document.getElementById("content").insertAdjacentHTML("beforeend",e)}#e(){let t=document.createElement("style");t.innerHTML=`
        #wnThemeSwitcher #lnkUserPrefChangePwd:before {
            content: "\\f1fc"!important;
        }
        `,document.head.appendChild(t);let i=document.getElementById("lnkUserPrefChangeLang").parentElement,n=document.createElement("li");n.setAttribute("id","wnThemeSwitcher");let r=document.createElement("a");r.setAttribute("id","lnkUserPrefChangePwd"),r.setAttribute("href","#"),r.setAttribute("onclick","wnThemeSwitcher.themeOptions();"),r.innerHTML="Change Theme",n.appendChild(r),i.parentNode.insertBefore(n,i.nextSibling)}themeOptions(){let e=document.getElementById("lnkUserPrefChangeLang").parentElement.parentElement,t=document.createElement("ul");t.setAttribute("id","wnThemeSwitcherOptions"),t.setAttribute("class","dropdown-menu dropdown-menu-right"),t.setAttribute("style","display: block;");let i="";this.#c.forEach(e=>{i+=`<li><a href="#" onclick="wnThemeSwitcher.curTheme = ${e.dir}; wnThemeSwitcher.setActiveStyle('${e.dir}___${e.type}');">${e.title}</a></li>`}),t.innerHTML=i,e.parentNode.insertBefore(t,e.nextSibling)}insertElement(){"bottom"===this.#a?this.#d():"usernav"===this.#a&&this.#e()}setActiveStyle(e){let t=e.split("___"),i=t[0],n=t[1],r=document.cookie.match(RegExp("(^| )wnCurTheme=([^;]+)"));if(r)try{document.getElementById(r[2]).remove(),document.getElementById(r[2]+"___icon").remove()}catch(s){console.log(s)}let h=`<link id="${e}" rel="stylesheet" type="text/css" href="${this.#b+i}/${"special"===n?"panel.css":"styles.css"}" />${"normal"===n?`<link id="${e}___icon" rel="stylesheet" type="text/css" href="${this.#b+i}/icon_spritemap.css" />`:""}`;document.head.insertAdjacentHTML("beforeend",h);let l=new Date;if(l.setTime(l.getTime()+31536e7),"Default"!==this.curTheme&&(document.cookie=`wnCurTheme=${e}; expires=${l}; path=/`),"usernav"===this.#a)try{document.getElementById("wnThemeSwitcherOptions").remove()}catch(a){console.log(a)}}}